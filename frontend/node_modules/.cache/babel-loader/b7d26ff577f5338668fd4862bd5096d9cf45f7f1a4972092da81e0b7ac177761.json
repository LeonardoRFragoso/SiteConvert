{"ast":null,"code":"import React,{useState}from'react';import Navbar from'./components/Navbar/navbar';// Navbar ajustada com Tailwind\nimport Footer from'./components/Footer/footer';// Footer ajustado com Tailwind\nimport FileUploader from'./components/FileUploader';import ConverterForm from'./components/ConverterForm';import ProgressBar from'./components/ProgressBar';import{ThemeProvider,useTheme}from'./context/ThemeContext';// Contexto de Tema\nimport'./index.css';// Tailwind base\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[file,setFile]=useState(null);const[fileType,setFileType]=useState('');const[convertedFile,setConvertedFile]=useState(null);const[progress,setProgress]=useState(0);const[error,setError]=useState('');const[isProcessing,setIsProcessing]=useState(false);// Para desabilitar o botão durante o processamento\nconst{isDarkMode}=useTheme();// Usando o tema global\nconst apiURL=process.env.REACT_APP_API_URL;// Função para lidar com o upload do arquivo\nconst handleFileUpload=uploadedFile=>{const type=uploadedFile.type.split('/')[0];// Ex.: \"image/png\" -> \"image\"\n// Verificação de tipo de arquivo\nif(!['image','audio','application'].includes(type)){setError('Tipo de arquivo não suportado. Por favor, envie uma imagem, áudio ou documento.');setFile(null);return;}setFileType(type);setFile(uploadedFile);setConvertedFile(null);setError('');};// Função para lidar com a conversão de arquivos\nconst handleConversion=format=>{if(!file){setError('Por favor, envie um arquivo primeiro.');return;}setIsProcessing(true);// Inicia o processo\nsetProgress(20);const formData=new FormData();formData.append('file',file);formData.append('format',format);let apiEndpoint=`${apiURL}/convert/image`;if(fileType==='audio')apiEndpoint=`${apiURL}/convert/audio`;else if(fileType==='application'&&file.name.endsWith('.pdf'))apiEndpoint=`${apiURL}/convert/pdf_to_images`;else if(fileType==='application'&&file.name.endsWith('.docx'))apiEndpoint=`${apiURL}/convert/docx_to_pdf`;fetch(apiEndpoint,{method:'POST',body:formData}).then(response=>{if(!response.ok){throw new Error('Erro ao processar o arquivo');}setProgress(70);return response.blob();}).then(blob=>{const downloadUrl=window.URL.createObjectURL(blob);setConvertedFile(downloadUrl);setProgress(100);setIsProcessing(false);// Finaliza o processo\n}).catch(err=>{setError(err.message||'Erro inesperado ao converter o arquivo');setProgress(0);setIsProcessing(false);// Finaliza o processo\n});};// Função para resetar o estado do upload/conversão\nconst reset=()=>{setFile(null);setFileType('');setConvertedFile(null);setProgress(0);setError('');setIsProcessing(false);};return/*#__PURE__*/_jsx(ThemeProvider,{children:/*#__PURE__*/_jsxs(\"div\",{className:`app-container ${isDarkMode?'bg-gray-800 text-white':'bg-gray-50 text-gray-800'} min-h-screen flex flex-col items-center justify-center`,children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold mb-6\",children:\"Conversor de Arquivos\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-lg\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Erro:\"}),\" \",error]}),/*#__PURE__*/_jsx(FileUploader,{onFileUpload:handleFileUpload,reset:reset}),file&&fileType==='image'&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(file),alt:\"Pr\\xE9-visualiza\\xE7\\xE3o\",className:\"max-w-lg rounded-lg shadow-md\"})}),file&&/*#__PURE__*/_jsx(ConverterForm,{onSubmit:handleConversion,formats:fileType==='image'?['jpeg','png','gif','svg']:fileType==='audio'?['mp3','wav','ogg','flac','aac']:file.name.endsWith('.pdf')?['png','jpeg','tiff','bmp']:['pdf'],isProcessing:isProcessing}),progress>0&&/*#__PURE__*/_jsx(ProgressBar,{progress:progress}),convertedFile&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsx(\"a\",{href:convertedFile,download:\"arquivo_convertido\",className:\"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600\",children:\"Baixar Arquivo Convertido\"})}),/*#__PURE__*/_jsx(Footer,{})]})});};export default App;","map":{"version":3,"names":["React","useState","Navbar","Footer","FileUploader","ConverterForm","ProgressBar","ThemeProvider","useTheme","jsx","_jsx","jsxs","_jsxs","App","file","setFile","fileType","setFileType","convertedFile","setConvertedFile","progress","setProgress","error","setError","isProcessing","setIsProcessing","isDarkMode","apiURL","process","env","REACT_APP_API_URL","handleFileUpload","uploadedFile","type","split","includes","handleConversion","format","formData","FormData","append","apiEndpoint","name","endsWith","fetch","method","body","then","response","ok","Error","blob","downloadUrl","window","URL","createObjectURL","catch","err","message","reset","children","className","onFileUpload","src","alt","onSubmit","formats","href","download"],"sources":["/home/leonardo-fragoso/Documentos/convertsite/frontend/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport Navbar from './components/Navbar/navbar'; // Navbar ajustada com Tailwind\nimport Footer from './components/Footer/footer'; // Footer ajustado com Tailwind\nimport FileUploader from './components/FileUploader';\nimport ConverterForm from './components/ConverterForm';\nimport ProgressBar from './components/ProgressBar';\nimport { ThemeProvider, useTheme } from './context/ThemeContext'; // Contexto de Tema\nimport './index.css'; // Tailwind base\n\nconst App = () => {\n  const [file, setFile] = useState(null);\n  const [fileType, setFileType] = useState('');\n  const [convertedFile, setConvertedFile] = useState(null);\n  const [progress, setProgress] = useState(0);\n  const [error, setError] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);  // Para desabilitar o botão durante o processamento\n  const { isDarkMode } = useTheme(); // Usando o tema global\n  const apiURL = process.env.REACT_APP_API_URL;\n\n  // Função para lidar com o upload do arquivo\n  const handleFileUpload = (uploadedFile) => {\n    const type = uploadedFile.type.split('/')[0]; // Ex.: \"image/png\" -> \"image\"\n    \n    // Verificação de tipo de arquivo\n    if (!['image', 'audio', 'application'].includes(type)) {\n      setError('Tipo de arquivo não suportado. Por favor, envie uma imagem, áudio ou documento.');\n      setFile(null);\n      return;\n    }\n\n    setFileType(type);\n    setFile(uploadedFile);\n    setConvertedFile(null);\n    setError('');\n  };\n\n  // Função para lidar com a conversão de arquivos\n  const handleConversion = (format) => {\n    if (!file) {\n      setError('Por favor, envie um arquivo primeiro.');\n      return;\n    }\n\n    setIsProcessing(true); // Inicia o processo\n    setProgress(20);\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('format', format);\n\n    let apiEndpoint = `${apiURL}/convert/image`;\n    if (fileType === 'audio') apiEndpoint = `${apiURL}/convert/audio`;\n    else if (fileType === 'application' && file.name.endsWith('.pdf')) apiEndpoint = `${apiURL}/convert/pdf_to_images`;\n    else if (fileType === 'application' && file.name.endsWith('.docx')) apiEndpoint = `${apiURL}/convert/docx_to_pdf`;\n\n    fetch(apiEndpoint, {\n      method: 'POST',\n      body: formData,\n    })\n      .then((response) => {\n        if (!response.ok) {\n          throw new Error('Erro ao processar o arquivo');\n        }\n        setProgress(70);\n        return response.blob();\n      })\n      .then((blob) => {\n        const downloadUrl = window.URL.createObjectURL(blob);\n        setConvertedFile(downloadUrl);\n        setProgress(100);\n        setIsProcessing(false); // Finaliza o processo\n      })\n      .catch((err) => {\n        setError(err.message || 'Erro inesperado ao converter o arquivo');\n        setProgress(0);\n        setIsProcessing(false); // Finaliza o processo\n      });\n  };\n\n  // Função para resetar o estado do upload/conversão\n  const reset = () => {\n    setFile(null);\n    setFileType('');\n    setConvertedFile(null);\n    setProgress(0);\n    setError('');\n    setIsProcessing(false);\n  };\n\n  return (\n    <ThemeProvider>\n      <div className={`app-container ${isDarkMode ? 'bg-gray-800 text-white' : 'bg-gray-50 text-gray-800'} min-h-screen flex flex-col items-center justify-center`}>\n        <Navbar /> \n        \n        <h1 className=\"text-4xl font-bold mb-6\">Conversor de Arquivos</h1>\n        \n        {/* Mensagem de erro, caso exista */}\n        {error && (\n          <p className=\"text-red-500 text-lg\">\n            <strong>Erro:</strong> {error}\n          </p>\n        )}\n\n        {/* Componente de upload de arquivos */}\n        <FileUploader onFileUpload={handleFileUpload} reset={reset} />\n        \n        {/* Pré-visualização de imagem */}\n        {file && fileType === 'image' && (\n          <div className=\"mt-4\">\n            <img \n              src={URL.createObjectURL(file)} \n              alt=\"Pré-visualização\" \n              className=\"max-w-lg rounded-lg shadow-md\"\n            />\n          </div>\n        )}\n\n        {/* Exibição do formulário de conversão */}\n        {file && (\n          <ConverterForm\n            onSubmit={handleConversion}\n            formats={\n              fileType === 'image'\n                ? ['jpeg', 'png', 'gif', 'svg']\n                : fileType === 'audio'\n                ? ['mp3', 'wav', 'ogg', 'flac', 'aac']\n                : file.name.endsWith('.pdf')\n                ? ['png', 'jpeg', 'tiff', 'bmp']\n                : ['pdf']\n            }\n            isProcessing={isProcessing} \n          />\n        )}\n\n        {/* Barra de progresso com animação */}\n        {progress > 0 && <ProgressBar progress={progress} />}\n        \n        {/* Link para baixar o arquivo convertido */}\n        {convertedFile && (\n          <div className=\"mt-6\">\n            <a href={convertedFile} download=\"arquivo_convertido\" className=\"bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600\">\n              Baixar Arquivo Convertido\n            </a>\n          </div>\n        )}\n\n        <Footer /> \n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}